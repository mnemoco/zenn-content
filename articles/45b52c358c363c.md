---
title: "RHEL9でタブ補完が効かないときの解決方法"
emoji: "🐚"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["Linux", "RHEL", "RHEL9", "Bash", "AWS"]
published: true
published_at: 2025-08-20 00:00
---

# RHEL9にbash-completionを入れてTabキー補完を快適にする

## 1. はじめに

AWS EC2にRHEL9を立ち上げたら、あれ？タブ補完が効かない、、、となりました。ファイル名やディレクトリ名は補完されるけど、gitやdnfのオプション補完がないと、地味にストレスです。

というわけでbash-completionを入れて解決していきます。

## 2. bash-completionとは？
ざっくりいうと、**Bashの補完をめっちゃ便利にしてくれる仕組み**です。

公式リポジトリの説明ではこうなってます：
>bash-completion は、 Bash シェルのコマンド ライン コマンド補完のコレクション 、新しい補完の作成を支援するヘルパー関数のコレクション、および要求に応じて自動的に補完をロードしてインストールするための機能のセットです。
>https://github.com/scop/bash-completion

標準のBashでも最低限の補完（ファイル・ディレクトリ）はできますが、bash-completionを入れると例えばこんな感じです👇
```
git che<Tab> → git checkout / git cherry-pick といった候補が出る
dnf install <Tab> → インストール可能なパッケージ名を補完
```

つまり、コマンド固有のオプションや引数までサクッと補完してくれるようになるわけです。

## 3. インストール手順

### 3.1 パッケージが入っているか確認

```bash
dnf list installed  | grep bash-completion
rpm -qa --queryformat "%{NAME}-%{VERSION}-%{RELEASE}.%{ARCH} = %{VENDOR}\n" | grep bash-completion
```
何も返ってこなければ、まだ入っていません。

### 3.2 パッケージのインストール

RHEL 9ではBaseOSに含まれています。
```bash
dnf search bash-completion
dnf install bash-completion
```

インストールされるファイルはこんな感じです。
```bash
rpm -ql bash-completion | grep bash_completion
/etc/bash_completion.d
/etc/bash_completion.d/redefine_filedir
/etc/profile.d/bash_completion.sh
/usr/share/bash-completion/bash_completion
/usr/share/doc/bash-completion/bash_completion.txt
```
:::message
`/etc/profile.d/bash_completion.sh`がポイントです。
→ これを読み込むことでタブ補完が有効になります。
:::

### 3.3 補完機能の確認

```bash
shopt | grep progcomp
progcomp        on
progcomp_alias  off
```
`progcomp on`になっていればOK。

最後に、スクリプトを読み込んで補完を有効化。
```bash
source /etc/profile.d/bash_completion.sh
```

## 参考

github.com/scop/bash-completion

https://github.com/scop/bash-completion

Programmable Completion

https://www.gnu.org/software/bash/manual/html_node/Programmable-Completion.html

パッケージマニフェスト | Red Hat Enterprise Linux | 9

https://docs.redhat.com/ja/documentation/red_hat_enterprise_linux/9/html-single/package_manifest/index